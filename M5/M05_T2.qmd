---
title: "Module 0: Tutorial 2"
subtitle: "Quarto and Github Portfolio"
number-sections: true
date: "2024-11-21"
date-modified: today
date-format: long
categories: ["Git", "Version Control", "Data Science Portfolio", "Resume"]
---

This Tutorial is a student‑friendly add‑on that makes **deployment fully automated with GitHub Actions**, while keeping **VS Code (preferred) or Positron** as the IDE and reinforcing the **user site** rule: `yourusername.github.io`.

I’ve added the screenshots/links as needed but the original document is available at [GutHub Pages](https://quarto.org/docs/publishing/github-pages.html).


# Auto‑Deploy Quarto Portfolio to GitHub Pages with **GitHub Actions**

> **IDE**: VS Code (preferred) or Positron
> **Site type**: **User site** at `https://yourusername.github.io`
> **Remember**:
> • Sign up for **GitHub Education Pack**: [https://education.github.com/pack](https://education.github.com/pack)
> • **Sign in** to GitHub inside your IDE
>
> * **VS Code**: Accounts icon (status bar) → **Sign in with GitHub**
> * **Positron**: Accounts tab → connect **GitHub**


## One‑time setup (5–10 min)

1. **Create the Quarto project** (name it `portfolio`, or anything you like):

```bash
quarto create project website portfolio
cd portfolio
```

2. **Edit `_quarto.yml`** minimally (user site doesn’t require `output-dir: docs` when CI renders):

```yaml
project:
  type: website

website:
  title: "FirstName LastName"
  navbar:
    right:
      - text: "Home"
        href: index.qmd
      - text: "Projects"
        href: projects.qmd
      - text: "About"
        href: about.qmd

format:
  html:
    theme: cosmo
    toc: true
```

3. (Optional but recommended) **Freeze computations** so CI doesn’t have to execute code:
   Create or edit `_quarto.yml` and add:

```yaml
execute:
  freeze: auto
```

This stores results in `_freeze/`, which you’ll commit.

4. **Initialize Git and first commit**

```bash
git init -b main
git add .
git commit -m "Initial portfolio"
```

## Create the **user site** repository

On GitHub, create a **public** repo named **exactly**:

```
yourusername.github.io
```

(Replace `yourusername` with your actual GitHub username.)

Connect and push:

```bash
git remote add origin https://github.com/yourusername/yourusername.github.io.git
git push -u origin main
```

> Why this matters: **User sites** at `yourusername.github.io` must be published from a repo with that exact name.


## Do a **one-time local publish** (bootstraps Quarto’s publish config)

Run this once from your project folder:

```bash
quarto publish gh-pages
```

* This creates a hidden `_publish.yml` Quarto config that the Action will use.
* It also creates the `gh-pages` branch and configures Pages for you.

Commit any new files that Quarto created (e.g., `_publish.yml`, `_freeze/` if present):

```bash
git add .
git commit -m "Add Quarto publish config"
git push
```

### Verify Pages "Source" → `gh-pages`

Open your repo → **Settings → Pages** and confirm **Source** is **`gh-pages`** with **/ (root)**.

![](M0_LN02_figures/gh-pages-user-site.png){.border}

## Add the **GitHub Actions** workflow (automatic build & deploy)

Create **`.github/workflows/publish.yml`** with this content:

```yaml
on:
  workflow_dispatch:
  push:
    branches: main

name: Quarto Publish

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    permissions:
      contents: write   # allows the action to push to gh-pages
    steps:
      - name: Check out repository
        uses: actions/checkout@v4

      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2

      # If you use Python notebooks (uncomment & add requirements.txt)
      # - name: Install Python and Dependencies
      #   uses: actions/setup-python@v5
      #   with:
      #     python-version: '3.12'
      #     cache: 'pip'
      # - run: pip install jupyter
      # - run: pip install -r requirements.txt

      # If you use R/knitr (uncomment to add renv support)
      # - name: Install R
      #   uses: r-lib/actions/setup-r@v2
      #   with:
      #     r-version: '4.5.1'
      # - name: Install R Dependencies
      #   uses: r-lib/actions/setup-renv@v2
      #   with:
      #     cache-version: 1

      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: gh-pages
          # path: .           # use if your Quarto project is in a subfolder
          # render: false     # use if you commit pre-rendered output; default is true
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```

**Grant workflow permissions**:
Repo → **Settings → Actions → General → Workflow permissions** → select **Read and write permissions** → Save.

Commit & push the workflow:

```bash
git add .github/workflows/publish.yml
git commit -m "Add Quarto GH Actions auto-deploy"
git push
```

Now, **every push to `main`** triggers a rebuild and updates `https://yourusername.github.io`.

You can also run it manually: repo → **Actions → Quarto Publish → Run workflow**.


## Keep screenshots section (if you show the other two methods)

If your tutorial also describes the other two (non‑CI) routes, keep these sections and images:

### Render to `docs/` (simple, no CI)

* Set `_quarto.yml`:

  ```yaml
  project:
    type: website
    output-dir: docs
  ```
* Add `.nojekyll` (root):

  * macOS/Linux:

    ```bash
    touch .nojekyll
    ```
  * Windows:

    ```bash
    copy NUL .nojekyll
    ```
* Render & push:

  ```bash
  quarto render
  git add docs
  git commit -m "Publish site to docs/"
  git push
  ```
* Set **Settings → Pages** to **Branch: main / Folder: /docs**.

![](M0_LN02_figures/gh-pages-docs-dir.png){.border}

### Publish command (manual deploy from local)

* Ensure **Source** branch for Pages is `gh-pages` with **/** (root) (screenshot above).
* Run:

  ```bash
  quarto publish gh-pages
  ```
* Private site?

  ```bash
  quarto publish gh-pages --no-browser
  ```


## Executing code on CI (optional patterns)

If you want CI to **execute notebooks** and then render:

### Python + Jupyter + `requirements.txt`

```yaml
- name: Install Python and Dependencies
  uses: actions/setup-python@v5
  with:
    python-version: '3.12'
    cache: 'pip'
- run: pip install jupyter
- run: pip install -r requirements.txt
```

### R + knitr + `renv.lock`

```yaml
- name: Install R
  uses: r-lib/actions/setup-r@v2
  with:
    r-version: '4.5.1'
- name: Install R Dependencies
  uses: r-lib/actions/setup-renv@v2
  with:
    cache-version: 1
```

Then keep the same **Render and Publish** step:

```yaml
- name: Render and Publish
  uses: quarto-dev/quarto-actions/publish@v2
  with:
    target: gh-pages
  env:
    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
```


## Ignore transient outputs but **commit `_freeze/`**

Add a `.gitignore` (top level) to avoid committing bulky render artifacts when using CI:

```
# Quarto caches/site output (CI will render)
_site/
.quarto/
*.DS_Store

# If you’re NOT using the docs/ method, also ignore it:
docs/
```

> Keep `_freeze/` committed so frozen execution results are available to CI.


## Custom domain (optional)

Add a plain text `CNAME` file at project root (alongside `_quarto.yml`) with your domain:

```
www.example.com
```

Re-render/publish so the `CNAME` is present on `gh-pages`.
(Prefer the file approach over only using the Settings UI—Quarto won’t overwrite your `CNAME` on render.)


## Troubleshooting quick hits

* **404 / old content** → Check the latest **Actions** run; ensure **Pages** source is `gh-pages`.
* **Workflow can’t push** → Confirm **Actions → Workflow permissions → Read and write**.
* **User site URL wrong** → Must be `https://yourusername.github.io` (no repo name suffix).
* **Images not showing** → Ensure you committed the `images/` folder and paths match:

  * `![](M0_LN02_figures/gh-pages-user-site.png){.border}`
  * `![](M0_LN02_figures/gh-pages-docs-dir.png){.border}`


## Student one‑page checklist

* [ ] Sign up for **GitHub Education**; sign in to GitHub in **VS Code/Positron**
* [ ] `quarto create project website portfolio && cd portfolio`
* [ ] Edit `_quarto.yml`, `index.qmd`, `about.qmd`, `projects.qmd`
* [ ] `git init -b main && git add . && git commit -m "Initial"`
* [ ] Create repo **`yourusername.github.io`** on GitHub (public, empty)
* [ ] `git remote add origin <repo-url> && git push -u origin main`
* [ ] **Run once**: `quarto publish gh-pages` (creates `_publish.yml`, sets Pages)
* [ ] Add workflow at `.github/workflows/publish.yml` (above)
* [ ] **Settings → Actions → Workflow permissions → Read and write**
* [ ] Push changes → watch **Actions** → visit `https://yourusername.github.io`